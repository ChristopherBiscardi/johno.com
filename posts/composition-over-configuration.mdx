---
title: Composition over configuration
path: /composition-over-configuration
date: 2019-03-26
---

Composition is powerful because it's a "simple" abstraction that's
meant to combine functionality.

## Components over configuration

In the frontend world we're already operating with a compositional
abstraction, the very components we're working with day in and day
out.

### Natural layering

Component composition allows you to layer specific needs.

##### Components can be wrapped

```js
<ResponsiveIframe>
  <Youtube id="12345" />
</ResponsiveIframe>
```

##### Components can be siblings

```js
<Image src="12345" alt="numbers" />
<Citation photographer="Fred Flintstone" />
```

#### Components can be abstracted

```js
<Image src="12345" alt="numbers" photography="Fred Flintstone" />
```

### Combining common elements

In the above example you might find that as a project evolves that
all Youtube components are accompanied by a wrapping ResponsiveIframe
component. After that pattern becomes solidifed you can create a
new component, ResponsiveYoutube and begin using that in its place.

What makes this especially powerful is the fact that you don't have
to immediately port the existing usage right away. That can happen
over time. Additionally, when there are edge cases that need some type
of one-off functionality you find yourself working at the component
layer rather than overloading a plugin, syntax, or configuration option.

## Configuration is (typically) global

In most cases, configuration is applied globally to a project or framework.
For example, let's consider remark plugins in [Gatsby](https://gatsbyjs.org).

When you apply a plugin to the global remark transformer it will affect
every document in the project. This can be problematic when you just need
to add in a responsive Youtube embed in a single Markdown file. What's also
interesting, is a project will typically _already_ have a Youtube component
that's used somewhere else (perhaps in a JSX-based page).

## Suboptimal workflow

The plugin workflow also departs from the parts of the project you're spending
most of your time in. If you're building for the web you're typically writing
content or building components for new pages, layouts, etc. You're operating
at an abstraction layer that's typically above the notion of configuration and
plugins (which is a good thing!).

## Composition is evolving

React Hooks introduce a new method of composition in components that provide
the power of mixins without the drawbacks. Granted, Hooks, have a lot of
[prior art](https://reactjs.org/docs/hooks-faq.html#what-is-the-prior-art-for-hooks),
but their introduction makes it more accessible to framework users and it's
built in.

## Conclusion

Configuration-based systems are necessary

## Related

- https://compositor.io/blog/introducing-kit#components-over-configuration
- https://clojurefun.wordpress.com/2012/08/17/composition-over-convention/
